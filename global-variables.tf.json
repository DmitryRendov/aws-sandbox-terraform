{
  "provider": [
    {
      "aws": {
        "assume_role": {
          "role_arn": "arn:aws:iam::${local.aws_account_id}:role/${var.terraform_exec_role}",
          "session_name": "terraform"
        },
        "profile": "sts",
        "region": "${var.region}"
      }
    },
    {
      "aws": {
        "alias": "audit",
        "assume_role": {
          "role_arn": "arn:aws:iam::${var.aws_account_map[\"audit\"]}:role/${var.terraform_exec_role}",
          "session_name": "terraform"
        },
        "profile": "sts",
        "region": "${var.region}"
      }
    },
    {
      "aws": {
        "alias": "bastion",
        "assume_role": {
          "role_arn": "arn:aws:iam::${var.aws_account_map[\"bastion\"]}:role/${var.terraform_exec_role}",
          "session_name": "terraform"
        },
        "profile": "sts",
        "region": "${var.region}"
      }
    },
    {
      "aws": {
        "alias": "production",
        "assume_role": {
          "role_arn": "arn:aws:iam::${var.aws_account_map[\"production\"]}:role/${var.terraform_exec_role}",
          "session_name": "terraform"
        },
        "profile": "sts",
        "region": "${var.region}"
      }
    },
    {
      "aws": {
        "alias": "staging",
        "assume_role": {
          "role_arn": "arn:aws:iam::${var.aws_account_map[\"staging\"]}:role/${var.terraform_exec_role}",
          "session_name": "terraform"
        },
        "profile": "sts",
        "region": "${var.region}"
      }
    },
    {
      "aws": {
        "alias": "west",
        "assume_role": {
          "role_arn": "arn:aws:iam::${local.aws_account_id}:role/${var.terraform_exec_role}",
          "session_name": "terraform"
        },
        "profile": "sts",
        "region": "us-west-2"
      }
    },
    {
      "aws": {
        "alias": "central",
        "assume_role": {
          "role_arn": "arn:aws:iam::${local.aws_account_id}:role/${var.terraform_exec_role}",
          "session_name": "terraform"
        },
        "profile": "sts",
        "region": "eu-central-1"
      }
    },
    {
      "template": {}
    },
    {
      "null": {}
    }
  ],
  "terraform": {
    "required_providers": {
      "archive": {
        "source": "hashicorp/archive",
        "version": "2.2.0"
      },
      "aws": {
        "source": "hashicorp/aws",
        "version": ">= 5.0.0"
      },
      "null": {
        "source": "hashicorp/null",
        "version": "3.1.0"
      },
      "template": {
        "source": "hashicorp/template",
        "version": "2.2.0"
      }
    },
    "required_version": "= 0.15.5"
  },
  "variable": {
    "aws_account_map": {
      "default": {
        "audit": "652427744890",
        "bastion": "501055688096",
        "production": "562495469185"
      }
    },
    "corp_subnets": {
      "default": [
        "51.254.133.16/32",
        "78.10.180.212/32"
      ],
      "description": "List of allowed networks."
    },
    "public_zone_name": {
      "default": "xn--b1add1bfm.xn--90ais",
      "description": "Name of public domain."
    },
    "terraform_exec_role": {
      "default": "super-user",
      "description": "Default role to create terraform resources"
    },
    "terraform_remote_state_bucket": {
      "default": "mob-terraform-state",
      "description": "Terraform remote s3 backend bucket name"
    },
    "terraform_remote_state_mob_bucket": {
      "default": "mob-server-backups",
      "description": "Terraform remote serverless s3 bucket for production"
    },
    "terraform_remote_state_region": {
      "default": "us-east-1",
      "description": "Terraform remote s3 storage region"
    }
  }
}
